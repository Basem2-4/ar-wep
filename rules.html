<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† | Alamariyah RP</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-black" oncontextmenu="return false;">

    <nav class="navbar">
        <div class="nav-oval-container">
            <ul class="nav-links">
                <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><a href="rules.html" class="active">Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</a></li>
                <li><a href="https://discord.gg/2yzKrHf7" target="_blank">Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</a></li>
            </ul>
        </div>
    </nav>

    <div class="rules-header">
        <h1 class="gold-pulse">Ù‚ÙˆØ§Ù†ÙŠÙ† ÙˆÙ„Ø§ÙŠØ© Ø§Ù„Ù…Ø§Ø±ÙŠØ©</h1>
        <p class="crystal-white">Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</p>
    </div>

    <div id="rulesGrid" class="rules-main-grid"></div>

    <div id="rulesOverlay" class="rules-overlay" onclick="closeRules()">
        <div class="rules-rect-box" onclick="event.stopPropagation()">
            <div class="rules-top-bar">
                <span class="back-link" onclick="closeRules()">â† Ø§Ù„Ø¹ÙˆØ¯Ø©</span>
                <h2 id="rulesTitle" class="gold-pulse"></h2>
            </div>
            <hr class="gold-divider">
            <ul id="rulesList" class="rules-list crystal-white"></ul>
        </div>
    </div>

    <div class="admin-trigger-container">
        <button id="adminBtn" onclick="loginAdmin()" class="btn-admin-open">ğŸ› ï¸ Ø¯Ø®ÙˆÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
    </div>

    <section id="adminPanel" class="admin-panel" style="display:none;">
        <div class="admin-card">
            <div class="admin-header">
                <h2 class="gold-pulse">ğŸ“ Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ Ù‚Ø³Ù…</h2>
                <button class="btn-close-admin" onclick="hideAdminPanel()">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù„ÙˆØ­Ø© Ã—</button>
            </div>
            
            <div class="admin-form">
                <div class="input-group">
                    <label>Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù…:</label>
                    <input type="text" id="catTitle" placeholder="Ù…Ø«Ø§Ù„: Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø³Ø·Ùˆ">
                </div>
                <div class="input-group">
                    <label>Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† (ÙƒÙ„ Ø³Ø·Ø± Ù‚Ø§Ù†ÙˆÙ† Ù…Ù†ÙØµÙ„):</label>
                    <textarea id="catRules" rows="8" placeholder="1. ÙŠÙ…Ù†Ø¹..\n2. ÙŠØ¬Ø¨.."></textarea>
                </div>
                <input type="hidden" id="editId">
                <button onclick="saveData()" class="btn-save">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            </div>
        </div>
    </section>

    <script>
        // Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù†Ø³Ø®
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && ['c', 'u', 's', 'i'].includes(e.key)) e.preventDefault();
            if (e.keyCode == 123) e.preventDefault();
        });

        let rulesData = JSON.parse(localStorage.getItem('serverRulesData')) || {
            "main": { title: "Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø¹Ø§Ù…Ø©", list: ["Ø§Ø­ØªØ±Ø§Ù… Ø§Ù„Ø¬Ù…ÙŠØ¹", "ÙŠÙ…Ù†Ø¹ Ø§Ù„ØªØ®Ø±ÙŠØ¨"] }
        };

        let isAdmin = false;

        function renderGrid() {
            const grid = document.getElementById('rulesGrid');
            grid.innerHTML = '';
            for (let id in rulesData) {
                let adminControls = isAdmin ? `
                    <div class="admin-actions">
                        <button class="btn-edit" onclick="event.stopPropagation(); editRules('${id}')">ØªØ¹Ø¯ÙŠÙ„</button>
                        <button class="btn-delete" onclick="event.stopPropagation(); deleteRules('${id}')">Ø­Ø°Ù</button>
                    </div>
                ` : '';

                grid.innerHTML += `
                    <div class="rule-box" onclick="openRules('${id}')">
                        <div class="r-icon">ğŸ“œ</div>
                        <div class="r-txt">
                            <h3>${rulesData[id].title}</h3>
                            ${adminControls}
                        </div>
                    </div>`;
            }
        }

        function openRules(id) {
            document.getElementById('rulesTitle').innerText = rulesData[id].title;
            document.getElementById('rulesList').innerHTML = rulesData[id].list.map(li => `<li>${li}</li>`).join('');
            document.getElementById('rulesOverlay').style.display = 'flex';
        }

        function closeRules() { document.getElementById('rulesOverlay').style.display = 'none'; }

        function loginAdmin() {
            if (isAdmin) { showAdminPanel(); return; }
            if (prompt("ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:") === "admin123") {
                isAdmin = true;
                document.getElementById('adminBtn').innerText = "ğŸ› ï¸ ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…";
                renderGrid();
                showAdminPanel();
            }
        }

        function showAdminPanel() {
            document.getElementById('adminPanel').style.display = 'block';
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }

        function hideAdminPanel() {
            document.getElementById('adminPanel').style.display = 'none';
            resetForm();
        }

        function saveData() {
            const title = document.getElementById('catTitle').value;
            const text = document.getElementById('catRules').value;
            const editId = document.getElementById('editId').value;

            if (!title || !text) return alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„");

            const id = editId || title.replace(/\s+/g, '-').toLowerCase();
            rulesData[id] = { 
                title: title, 
                list: text.split('\n').filter(l => l.trim() !== "") 
            };

            localStorage.setItem('serverRulesData', JSON.stringify(rulesData));
            renderGrid();
            hideAdminPanel();
            alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­");
        }

        function editRules(id) {
            document.getElementById('catTitle').value = rulesData[id].title;
            document.getElementById('catRules').value = rulesData[id].list.join('\n');
            document.getElementById('editId').value = id;
            showAdminPanel();
        }

        function deleteRules(id) {
            if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ")) {
                delete rulesData[id];
                localStorage.setItem('serverRulesData', JSON.stringify(rulesData));
                renderGrid();
            }
        }

        function resetForm() {
            document.getElementById('catTitle').value = '';
            document.getElementById('catRules').value = '';
            document.getElementById('editId').value = '';
        }

        renderGrid();
    </script>
</body>
</html>